<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2422.5px" preserveAspectRatio="none" style="width:1200px;height:2422px;background:#FFFFFF;" version="1.1" viewBox="0 0 1200 2422" width="1200px" zoomAndPan="magnify"><defs/><g><ellipse cx="525" cy="50" fill="#000000" rx="25" ry="25" style="stroke:none;stroke-width:2.5;"/><rect fill="#FFFFFF" height="487.2266" style="stroke:#000000;stroke-width:5.0;" width="535" x="257.5" y="100"/><path d="M590,100 L590,126.5234 L565,151.5234 L257.5,151.5234 " fill="none" style="stroke:#000000;stroke-width:5.0;"/><text fill="#000000" font-family="sans-serif" font-size="35" lengthAdjust="spacing" textLength="307.5" x="265" y="138.833">Reader initialization</text><rect fill="#FEFECE" height="87.7344" rx="31.25" ry="31.25" style="stroke:#D4AC0D;stroke-width:3.75;" width="247.5" x="401.25" y="194.0234"/><text fill="#000000" font-family="sans-serif" font-size="30" lengthAdjust="spacing" textLength="197.5" x="426.25" y="250.166">register plugin</text><rect fill="#FEFECE" height="87.7344" rx="31.25" ry="31.25" style="stroke:#D4AC0D;stroke-width:3.75;" width="190" x="430" y="331.7578"/><text fill="#000000" font-family="sans-serif" font-size="30" lengthAdjust="spacing" textLength="140" x="455" y="387.9004">get reader</text><rect fill="#FEFECE" height="87.7344" rx="31.25" ry="31.25" style="stroke:#D4AC0D;stroke-width:3.75;" width="485" x="282.5" y="469.4922"/><text fill="#000000" font-family="sans-serif" font-size="30" lengthAdjust="spacing" textLength="435" x="307.5" y="525.6348">prepare card selection scenario</text><polygon fill="#FEFECE" points="396.25,637.2266,653.75,637.2266,683.75,667.2266,653.75,697.2266,396.25,697.2266,366.25,667.2266,396.25,637.2266" style="stroke:#A80036;stroke-width:3.75;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="257.5" x="396.25" y="678.479">card selection mode?</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="197.5" x="168.75" y="661.1841">explicit selection</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="240" x="683.75" y="661.1841">scheduled selection</text><rect fill="#FEFECE" height="87.7344" rx="31.25" ry="31.25" style="stroke:#D4AC0D;stroke-width:3.75;" width="395" x="27.5" y="722.2266"/><text fill="#000000" font-family="sans-serif" font-size="30" lengthAdjust="spacing" textLength="345" x="52.5" y="778.3691">process explicit selection</text><rect fill="#FEFECE" height="87.7344" rx="31.25" ry="31.25" style="stroke:#D4AC0D;stroke-width:3.75;" width="437.5" x="606.25" y="722.2266"/><text fill="#000000" font-family="sans-serif" font-size="30" lengthAdjust="spacing" textLength="387.5" x="631.25" y="778.3691">schedule selection scenario</text><rect fill="#FEFECE" height="87.7344" rx="31.25" ry="31.25" style="stroke:#D4AC0D;stroke-width:3.75;" width="375" x="637.5" y="859.9609"/><text fill="#000000" font-family="sans-serif" font-size="30" lengthAdjust="spacing" textLength="325" x="662.5" y="916.1035">start reader observation</text><rect fill="#FEFECE" height="87.7344" rx="31.25" ry="31.25" style="stroke:#D4AC0D;stroke-width:3.75;" width="310" x="670" y="997.6953"/><text fill="#000000" font-family="sans-serif" font-size="30" lengthAdjust="spacing" textLength="260" x="695" y="1053.8379">start card detection</text><rect fill="#FEFECE" height="87.7344" rx="31.25" ry="31.25" style="stroke:#D4AC0D;stroke-width:3.75;" width="262.5" x="693.75" y="1135.4297"/><text fill="#000000" font-family="sans-serif" font-size="30" lengthAdjust="spacing" textLength="212.5" x="718.75" y="1191.5723">wait for a card...</text><rect fill="#000000" height="15" rx="6.25" ry="6.25" style="stroke:#000000;stroke-width:2.5;" width="700" x="472.5" y="1248.1641"/><rect fill="#FFFFFF" height="487.2266" style="stroke:#000000;stroke-width:5.0;" width="635" x="507.5" y="1289.6045"/><path d="M1117.5,1289.6045 L1117.5,1316.1279 L1092.5,1341.1279 L507.5,1341.1279 " fill="none" style="stroke:#000000;stroke-width:5.0;"/><text fill="#000000" font-family="sans-serif" font-size="35" lengthAdjust="spacing" textLength="585" x="515" y="1328.4375">Reader observation background task</text><rect fill="#FEFECE" height="87.7344" rx="31.25" ry="31.25" style="stroke:#D4AC0D;stroke-width:3.75;" width="245" x="702.5" y="1383.6279"/><text fill="#000000" font-family="sans-serif" font-size="30" lengthAdjust="spacing" textLength="195" x="727.5" y="1439.7705">card scanning</text><rect fill="#FEFECE" height="87.7344" rx="31.25" ry="31.25" style="stroke:#D4AC0D;stroke-width:3.75;" width="575" x="537.5" y="1521.3623"/><text fill="#000000" font-family="sans-serif" font-size="30" lengthAdjust="spacing" textLength="525" x="562.5" y="1577.5049">process scheduled selection scenario</text><rect fill="#FEFECE" height="87.7344" rx="31.25" ry="31.25" style="stroke:#D4AC0D;stroke-width:3.75;" width="490" x="580" y="1659.0967"/><text fill="#000000" font-family="sans-serif" font-size="30" lengthAdjust="spacing" textLength="440" x="605" y="1715.2393">notifies card inserted &amp; selected</text><rect fill="#000000" height="15" rx="6.25" ry="6.25" style="stroke:#000000;stroke-width:2.5;" width="700" x="472.5" y="1801.8311"/><rect fill="#FEFECE" height="87.7344" rx="31.25" ry="31.25" style="stroke:#D4AC0D;stroke-width:3.75;" width="347.5" x="651.25" y="1866.8311"/><text fill="#000000" font-family="sans-serif" font-size="30" lengthAdjust="spacing" textLength="297.5" x="676.25" y="1922.9736">parse selection result</text><polygon fill="#FEFECE" points="525,1969.5654,555,1999.5654,525,2029.5654,495,1999.5654,525,1969.5654" style="stroke:#A80036;stroke-width:3.75;"/><rect fill="#FEFECE" height="87.7344" rx="31.25" ry="31.25" style="stroke:#D4AC0D;stroke-width:3.75;" width="285" x="382.5" y="2079.5654"/><text fill="#000000" font-family="sans-serif" font-size="30" lengthAdjust="spacing" textLength="235" x="407.5" y="2135.708">get selected card</text><rect fill="#FEFECE" height="87.7344" rx="31.25" ry="31.25" style="stroke:#D4AC0D;stroke-width:3.75;" width="525" x="262.5" y="2307.522"/><text fill="#000000" font-family="sans-serif" font-size="30" lengthAdjust="spacing" textLength="475" x="287.5" y="2363.6646">send APDU commands to the card</text><line style="stroke:#A80036;stroke-width:3.75;" x1="525" x2="525" y1="281.7578" y2="331.7578"/><polygon fill="#A80036" points="515,306.7578,525,331.7578,535,306.7578,525,316.7578" style="stroke:#A80036;stroke-width:2.5;"/><line style="stroke:#A80036;stroke-width:3.75;" x1="525" x2="525" y1="419.4922" y2="469.4922"/><polygon fill="#A80036" points="515,444.4922,525,469.4922,535,444.4922,525,454.4922" style="stroke:#A80036;stroke-width:2.5;"/><line style="stroke:#A80036;stroke-width:3.75;" x1="525" x2="525" y1="75" y2="194.0234"/><polygon fill="#A80036" points="515,169.0234,525,194.0234,535,169.0234,525,179.0234" style="stroke:#A80036;stroke-width:2.5;"/><line style="stroke:#A80036;stroke-width:3.75;" x1="825" x2="825" y1="809.9609" y2="859.9609"/><polygon fill="#A80036" points="815,834.9609,825,859.9609,835,834.9609,825,844.9609" style="stroke:#A80036;stroke-width:2.5;"/><line style="stroke:#A80036;stroke-width:3.75;" x1="825" x2="825" y1="947.6953" y2="997.6953"/><polygon fill="#A80036" points="815,972.6953,825,997.6953,835,972.6953,825,982.6953" style="stroke:#A80036;stroke-width:2.5;"/><line style="stroke:#A80036;stroke-width:3.75;" x1="825" x2="825" y1="1085.4297" y2="1135.4297"/><polygon fill="#A80036" points="815,1110.4297,825,1135.4297,835,1110.4297,825,1120.4297" style="stroke:#A80036;stroke-width:2.5;"/><line style="stroke:#A80036;stroke-width:3.75;" x1="825" x2="825" y1="1471.3623" y2="1521.3623"/><polygon fill="#A80036" points="815,1496.3623,825,1521.3623,835,1496.3623,825,1506.3623" style="stroke:#A80036;stroke-width:2.5;"/><line style="stroke:#A80036;stroke-width:3.75;" x1="825" x2="825" y1="1609.0967" y2="1659.0967"/><polygon fill="#A80036" points="815,1634.0967,825,1659.0967,835,1634.0967,825,1644.0967" style="stroke:#A80036;stroke-width:2.5;"/><line style="stroke:#A80036;stroke-width:3.75;" x1="825" x2="825" y1="1263.1641" y2="1383.6279"/><polygon fill="#A80036" points="815,1358.6279,825,1383.6279,835,1358.6279,825,1368.6279" style="stroke:#A80036;stroke-width:2.5;"/><line style="stroke:#A80036;stroke-width:3.75;" x1="825" x2="825" y1="1816.8311" y2="1866.8311"/><polygon fill="#A80036" points="815,1841.8311,825,1866.8311,835,1841.8311,825,1851.8311" style="stroke:#A80036;stroke-width:2.5;"/><line style="stroke:#A80036;stroke-width:3.75;" x1="366.25" x2="225" y1="667.2266" y2="667.2266"/><line style="stroke:#A80036;stroke-width:3.75;" x1="225" x2="225" y1="667.2266" y2="722.2266"/><polygon fill="#A80036" points="215,697.2266,225,722.2266,235,697.2266,225,707.2266" style="stroke:#A80036;stroke-width:2.5;"/><line style="stroke:#A80036;stroke-width:3.75;" x1="683.75" x2="825" y1="667.2266" y2="667.2266"/><line style="stroke:#A80036;stroke-width:3.75;" x1="825" x2="825" y1="667.2266" y2="722.2266"/><polygon fill="#A80036" points="815,697.2266,825,722.2266,835,697.2266,825,707.2266" style="stroke:#A80036;stroke-width:2.5;"/><line style="stroke:#A80036;stroke-width:3.75;" x1="225" x2="225" y1="809.9609" y2="1999.5654"/><line style="stroke:#A80036;stroke-width:3.75;" x1="225" x2="495" y1="1999.5654" y2="1999.5654"/><polygon fill="#A80036" points="470,1989.5654,495,1999.5654,470,2009.5654,480,1999.5654" style="stroke:#A80036;stroke-width:2.5;"/><line style="stroke:#A80036;stroke-width:3.75;" x1="825" x2="825" y1="1954.5654" y2="1999.5654"/><line style="stroke:#A80036;stroke-width:3.75;" x1="825" x2="555" y1="1999.5654" y2="1999.5654"/><polygon fill="#A80036" points="580,1989.5654,555,1999.5654,580,2009.5654,570,1999.5654" style="stroke:#A80036;stroke-width:2.5;"/><line style="stroke:#A80036;stroke-width:3.75;" x1="525" x2="525" y1="557.2266" y2="637.2266"/><polygon fill="#A80036" points="515,612.2266,525,637.2266,535,612.2266,525,622.2266" style="stroke:#A80036;stroke-width:2.5;"/><line style="stroke:#A80036;stroke-width:3.75;" x1="525" x2="525" y1="2029.5654" y2="2079.5654"/><polygon fill="#A80036" points="515,2054.5654,525,2079.5654,535,2054.5654,525,2064.5654" style="stroke:#A80036;stroke-width:2.5;"/><line style="stroke:#008000;stroke-width:3.75;stroke-dasharray:7.0,7.0;" x1="525" x2="525" y1="2167.2998" y2="2307.522"/><polygon fill="#008000" points="515,2282.522,525,2307.522,535,2282.522,525,2292.522" style="stroke:#008000;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="370" x="535" y="2223.1396">Then specific operations could</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="357.5" x="550" y="2257.7295">be processed with the card...</text><!--MD5=[9703a94210bb13f37887ee63d89e3cbe]
@startuml

'skinparam ClassBorderColor #F1C40F
skinparam ClassBorderColor #D4AC0D
skinparam stereotypeABorderColor #A9DCDF
skinparam stereotypeIBorderColor #B4A7E5
skinparam stereotypeCBorderColor #ADD1B2
skinparam stereotypeEBorderColor #EB93DF
skinparam shadowing false

skinparam StateBorderColor #D4AC0D
skinparam ActivityBorderColor #D4AC0D

' Red
skinparam ClassBackgroundColor<<red>> #FDEDEC
skinparam ClassBorderColor<<red>> #E74C3C
hide <<red>> stereotype
' Purple
skinparam ClassBackgroundColor<<purple>> #F4ECF7
skinparam ClassBorderColor<<purple>> #8E44AD
hide <<purple>> stereotype
' blue
skinparam ClassBackgroundColor<<blue>> #EBF5FB
skinparam ClassBorderColor<<blue>> #3498DB
hide <<blue>> stereotype
' Green
skinparam ClassBackgroundColor<<green>> #EAFAF1
skinparam ClassBorderColor<<green>> #2ECC71
hide <<green>> stereotype

' Orange
skinparam ClassBackgroundColor<<orange>> #FDF2E9
skinparam ClassBorderColor<<orange>> #E67E22
hide <<orange>> stereotype

' Grey
skinparam ClassBackgroundColor<<grey>> #EAECEE
skinparam ClassBorderColor<<grey>> #2C3E50
hide <<grey>> stereotype

start
partition "Reader initialization" {
	:register plugin;
	:get reader;
	:prepare card selection scenario;
}

if (card selection mode?) then (explicit selection)
	:process explicit selection;
else (scheduled selection)
    :schedule selection scenario;
    :start reader observation;
    :start card detection;
    :wait for a card...;
	detach
	fork
		partition "Reader observation background task" {
		    :card scanning;
            :process scheduled selection scenario;
            :notifies card inserted & selected;
		}
	end fork
	detach
	:parse selection result;
endif
	:get selected card;
-[#green,dashed]-> Then specific operations could
  be processed with the card...;
	:send APDU commands to the card;
@enduml

@startuml

skinparam ClassBorderColor #D4AC0D
skinparam stereotypeABorderColor #A9DCDF
skinparam stereotypeIBorderColor #B4A7E5
skinparam stereotypeCBorderColor #ADD1B2
skinparam stereotypeEBorderColor #EB93DF
skinparam shadowing false

skinparam StateBorderColor #D4AC0D
skinparam ActivityBorderColor #D4AC0D

skinparam ClassBackgroundColor<<red>> #FDEDEC
skinparam ClassBorderColor<<red>> #E74C3C
hide <<red>> stereotype
skinparam ClassBackgroundColor<<purple>> #F4ECF7
skinparam ClassBorderColor<<purple>> #8E44AD
hide <<purple>> stereotype
skinparam ClassBackgroundColor<<blue>> #EBF5FB
skinparam ClassBorderColor<<blue>> #3498DB
hide <<blue>> stereotype
skinparam ClassBackgroundColor<<green>> #EAFAF1
skinparam ClassBorderColor<<green>> #2ECC71
hide <<green>> stereotype

skinparam ClassBackgroundColor<<orange>> #FDF2E9
skinparam ClassBorderColor<<orange>> #E67E22
hide <<orange>> stereotype

skinparam ClassBackgroundColor<<grey>> #EAECEE
skinparam ClassBorderColor<<grey>> #2C3E50
hide <<grey>> stereotype

start
partition "Reader initialization" {
	:register plugin;
	:get reader;
	:prepare card selection scenario;
}

if (card selection mode?) then (explicit selection)
	:process explicit selection;
else (scheduled selection)
    :schedule selection scenario;
    :start reader observation;
    :start card detection;
    :wait for a card...;
	detach
	fork
		partition "Reader observation background task" {
		    :card scanning;
            :process scheduled selection scenario;
            :notifies card inserted & selected;
		}
	end fork
	detach
	:parse selection result;
endif
	:get selected card;
-[#green,dashed]-> Then specific operations could
  be processed with the card...;
	:send APDU commands to the card;
@enduml

PlantUML version 1.2021.7(Sun May 23 14:40:07 CEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: Cp1252
Language: fr
Country: FR
--></g></svg>